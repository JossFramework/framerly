import n from"https://cdn.jsdelivr.net/npm/navigo@8.11.1/+esm";document.addEventListener("DOMContentLoaded",async()=>{const t=document.querySelector("content"),e=await fetch("router.json"),a=await e.json();function r(e){let r=a[e];if(!r){const t=Object.entries(a).find(([t,e])=>e===e);r=t?.[1]||a.default||a["/home"]}fetch(r).then(t=>{if(!t.ok)throw new Error("404");return t.text()}).then(e=>{t.innerHTML=e;const o=new URL(window.location),n=Object.entries(a).find(([t,e])=>e===r)?.[0]||"";n&&"default"!==n?(o.searchParams.set("page",n.replace(/^\//,"")),history.replaceState({path:n},"",o)):(o.searchParams.delete("page"),history.replaceState({},"",o.pathname))}).catch(()=>{t.innerHTML="<p>Error al cargar el componente.</p>"})}const o=document.querySelector("routes");if(o){const t=document.createElement("nav");for(const e of o.attributes)t.setAttribute(e.name,e.value);t.innerHTML=o.innerHTML,t.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=e.getAttribute("href").replace(/^\//,"");r("/"+o)})}),o.replaceWith(t)}const c=new URLSearchParams(window.location.search).get("page"),l=c?"/"+c:a.default||a["/home"];r(l),window.addEventListener("popstate",()=>{const t=new URLSearchParams(window.location.search).get("page"),e=t?"/"+t:a.default||a["/home"];r(e)}),document.body.addEventListener("click",t=>{const e=t.target.closest("[data-load]");if(e){t.preventDefault();const a=e.getAttribute("data-load");a&&r(a.startsWith("/")?a:"/"+a)}})});

